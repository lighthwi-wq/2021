<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>IDEA BRAIN ‚Ä¢ 2025 Enhanced</title>

  <!-- Fonts (Noto Sans KR only) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700;900&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/quill@2.0.2/dist/quill.snow.css" rel="stylesheet">

  <style>
    /* ==== Design Tokens ==== */
    :root{
      --font-family:'Noto Sans KR','Noto Sans KR',sans-serif;
      --fs-12:.75rem;--fs-13:.8125rem;--fs-14:.875rem;--fs-16:1rem;--fs-18:1.125rem;--fs-22:1.375rem;--fs-28:1.75rem;
      --r-xs:10px;--r-sm:12px;--r-md:14px;--r-lg:16px;--r-xl:20px;
      --sp-4:.25rem;--sp-6:.375rem;--sp-8:.5rem;--sp-10:.625rem;--sp-12:.75rem;--sp-14:.875rem;--sp-16:1rem;--sp-20:1.25rem;--sp-24:1.5rem;
      --bg:#0b0b0c;--bg-elev:#121316;--text:#e5e7eb;--muted:#9aa3b2;--hairline:rgba(255,255,255,.06);
      --card:linear-gradient(180deg,rgba(24,26,31,.86),rgba(16,18,22,.86));--glass:blur(18px);
      --accent-1:#6d79ff;--accent-2:#8a5cff;--accent-3:#f093fb;--accent-grad:linear-gradient(135deg,var(--accent-1),var(--accent-2) 55%,var(--accent-3));
      --shadow-sm:0 4px 14px rgba(0,0,0,.25);--shadow-md:0 10px 24px rgba(0,0,0,.28);--shadow-lg:0 18px 40px rgba(0,0,0,.32);
      --ctl-40:40px;--ctl-48:48px;--fab:56px;--ease:cubic-bezier(.4,0,.2,1);--dur-1:.18s;--dur-2:.28s;--dur-3:.44s;
      --ico-stroke:2;--ico-size:20px;
      --skip-bg:#000;--skip-bd:#000;--skip-fg:#fff;
    }
    html.light{
      --bg:#f8f9fb;--bg-elev:rgba(255,255,255,.92);--text:#1c212b;--muted:#697386;--hairline:rgba(0,0,0,.08);
      --card:linear-gradient(180deg,rgba(255,255,255,.98),rgba(248,249,252,.95));
    }
    @media(prefers-color-scheme:light){
      :root:not(.light):not(.dark){
        --bg:#f8f9fb;--bg-elev:rgba(255,255,255,.92);--text:#1c212b;--muted:#697386;--hairline:rgba(0,0,0,.08);
        --card:linear-gradient(180deg,rgba(255,255,255,.98),rgba(248,249,252,.95));
      }
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font:400 var(--fs-14)/1.55 var(--font-family);color:var(--text);background:var(--bg);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}
    :where(html,body,header,main,nav,section,article,div,span,a,strong,em,small,mark,h1,h2,h3,h4,h5,h6,p,ul,ol,li,dl,dt,dd,table,th,td,caption,blockquote,code,pre,figure,figcaption,button,input,textarea,select,label,.btn,.vbtn,.gnb-btn,.icon-btn,.brand,.splash-logo,.splash-sub,.cal-title,.cal-dow,.cal-day,.meta,.tag){font-family:var(--font-family) !important}
    ::placeholder{font-family:var(--font-family)}
    .ql-snow *{font-family:var(--font-family) !important}

    .ico{width:var(--ico-size);height:var(--ico-size);stroke:currentColor;stroke-width:var(--ico-stroke);fill:none;stroke-linecap:round;stroke-linejoin:round;display:inline-block}

    header{position:sticky;top:0;z-index:50;backdrop-filter:var(--glass);background:color-mix(in srgb,var(--bg-elev) 88%,transparent);border-bottom:1px solid var(--hairline);transition:transform .3s var(--ease)}
    header.scrolled{transform:translateY(-2px);box-shadow:var(--shadow-md)}
    .wrap{max-width:1040px;margin:0 auto;padding:var(--sp-12) var(--sp-16)}
    .row{display:flex;align-items:center;justify-content:space-between;gap:var(--sp-10)}
    .brand{font-weight:900;letter-spacing:-.035em;line-height:1;font-size:clamp(2.2rem,4.4vw,2.7rem);background:var(--accent-grad);-webkit-background-clip:text;background-clip:text;color:transparent;transition:all .3s cubic-bezier(.34,1.56,.64,1);cursor:pointer;position:relative}
    .brand::after{content:'';position:absolute;inset:0;background:var(--accent-grad);opacity:0;filter:blur(12px);transition:opacity .3s ease;z-index:-1}
    .brand:hover{filter:brightness(1.15);transform:scale(1.02)}
    .brand:hover::after{opacity:.3}
    .brand:active{transform:scale(.98)}
    .brand-wrap{display:flex;flex-direction:column;line-height:1}
    .brand-sub{margin-top:2px;font-weight:900;letter-spacing:.08em;font-size:11px;text-transform:uppercase;color:color-mix(in srgb,var(--muted) 85%, transparent)}
    html.dark .brand-sub{color:rgba(226,232,240,.88)}
    .brand-sub.logo{color:#fff;letter-spacing:.09em;opacity:.96;text-shadow:0 1px 0 rgba(0,0,0,.12)}
    .toolbar{display:flex;align-items:center;gap:var(--sp-8)}
    .icon-btn{width:40px;height:40px;display:inline-flex;align-items:center;justify-content:center;border:none;border-radius:50%;background:color-mix(in srgb,var(--bg-elev) 95%,transparent);transition:all .25s cubic-bezier(.2,.8,.2,1);cursor:pointer;color:var(--muted);position:relative;overflow:hidden}
    .icon-btn::before{content:'';position:absolute;inset:0;background:color-mix(in srgb,var(--accent-1) 12%,transparent);opacity:0;transition:all .25s cubic-bezier(.2,.8,.2,1);border-radius:50%;transform:scale(.7)}
    .icon-btn .ico{transition:all .25s cubic-bezier(.2,.8,.2,1);position:relative;z-index:1;stroke-width:2}
    .icon-btn:hover{color:var(--accent-1);transform:scale(1.08)}
    .icon-btn:hover::before{opacity:1;transform:scale(1)}
    .icon-btn:active{transform:scale(.92)}
    .icon-btn:active::before{transform:scale(.9)}
    html.dark .icon-btn,html.dark .cal-btn{background:rgba(255,255,255,.08);color:rgba(255,255,255,.7)}
    html.light .icon-btn,html.light .cal-btn{background:rgba(0,0,0,.06);color:rgba(0,0,0,.6)}
    html.dark .icon-btn:hover,html.light .icon-btn:hover{color:var(--accent-1)}
    .icon-btn:focus-visible,.cal-btn:focus-visible,.vbtn:focus-visible,.btn:focus-visible{outline:3px solid color-mix(in srgb,var(--accent-1) 45%,transparent);outline-offset:2px}

    /* Search - Enhanced */
    .search{margin-top:var(--sp-10);position:relative}
    .search input{width:100%;height:var(--ctl-48);background:color-mix(in srgb,var(--bg-elev) 85%,transparent);border:1px solid var(--hairline);border-radius:var(--r-lg);padding:0 var(--sp-16) 0 48px;color:var(--text);outline:none;transition:all var(--dur-2) var(--ease)}
    .search input:focus{box-shadow:0 0 0 4px color-mix(in srgb,var(--accent-1) 18%,transparent),0 8px 24px rgba(0,0,0,.15);border-color:color-mix(in srgb,var(--accent-1) 38%,var(--hairline));transform:translateY(-1px)}
    .search-icon{position:absolute;left:16px;top:50%;transform:translateY(-50%);pointer-events:none;color:var(--muted);transition:color .2s var(--ease)}
    .search input:focus ~ .search-icon{color:var(--accent-1)}
    .search-results{position:absolute;left:0;right:0;top:calc(100% + 8px);background:var(--card);border:1px solid var(--hairline);border-radius:16px;box-shadow:var(--shadow-lg);display:none;max-height:50vh;overflow:auto;animation:slideDown .2s var(--ease)}
    @keyframes slideDown{from{opacity:0;transform:translateY(-8px)}to{opacity:1;transform:translateY(0)}}
    .search-item{display:flex;align-items:center;gap:.6rem;padding:.8rem 1rem;cursor:pointer;transition:all .15s var(--ease);border-radius:12px;margin:4px}
    .search-item:hover{background:color-mix(in srgb,var(--accent-1) 12%,transparent);transform:translateX(4px)}
    .search-empty{padding:1.5rem;color:var(--muted);font-size:var(--fs-13);text-align:center} 
    mark{background:color-mix(in srgb,var(--accent-2) 25%,transparent);color:inherit;padding:2px 4px;border-radius:4px}

    .viewbar{display:flex;gap:var(--sp-6);margin:var(--sp-12) 0 var(--sp-16);padding:var(--sp-4);border-radius:var(--r-lg);background:color-mix(in srgb,var(--bg-elev) 90%,transparent);width:max-content;box-shadow:0 2px 8px rgba(0,0,0,.08)}
    .vbtn{display:flex;align-items:center;gap:var(--sp-6);border:none;border-radius:var(--r-md);padding:var(--sp-8) var(--sp-14);font-weight:800;cursor:pointer;transition:all .25s cubic-bezier(.2,.8,.2,1);color:inherit;position:relative;overflow:hidden;background:transparent}
    .vbtn::before{content:'';position:absolute;inset:0;background:var(--accent-grad);opacity:0;transition:all .25s cubic-bezier(.2,.8,.2,1);border-radius:var(--r-md)}
    html.dark .vbtn{color:rgba(255,255,255,.7)}
    html.light .vbtn{color:rgba(0,0,0,.6)}
    .vbtn .ico{transition:all .25s cubic-bezier(.2,.8,.2,1);position:relative;z-index:1}
    .vbtn:hover:not(.active){transform:scale(1.02)}
    .vbtn:hover:not(.active) .ico{transform:scale(1.1)}
    .vbtn:active:not(.active){transform:scale(.95)}
    .vbtn.active{color:#fff;transform:scale(1)}
    .vbtn.active::before{opacity:1}
    .vbtn.active .ico{transform:scale(1)}

    main{max-width:1040px;margin:0 auto;padding:var(--sp-16);padding-bottom:8.5rem}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:var(--sp-16)}
    .list{display:flex;flex-direction:column;gap:var(--sp-16)}

    .card{background:var(--card);border:1px solid var(--hairline);border-radius:var(--r-xl);padding:var(--sp-16);box-shadow:var(--shadow-md);transition:all var(--dur-2) var(--ease);cursor:pointer;position:relative;overflow:hidden}
    .card::before{content:'';position:absolute;inset:0;background:var(--accent-grad);opacity:0;transition:opacity .3s var(--ease)}
    .card:hover::before{opacity:.03}
    .card:hover{transform:translateY(-6px) scale(1.01);box-shadow:var(--shadow-lg),0 0 0 1px color-mix(in srgb,var(--accent-1) 20%,transparent)}
    .card:active{transform:translateY(-2px) scale(.99)}
    .thumb{overflow:hidden;border-radius:var(--r-lg);margin-bottom:var(--sp-12);position:relative}
    .thumb::after{content:'';position:absolute;inset:0;background:linear-gradient(180deg,transparent 60%,rgba(0,0,0,.3));pointer-events:none}
    .thumb img{width:100%;height:200px;object-fit:cover;display:block;transition:transform .4s var(--ease)}
    .card:hover .thumb img{transform:scale(1.05)}
    .title{font-size:var(--fs-18);font-weight:900;letter-spacing:-.02em;margin-bottom:var(--sp-10);position:relative;z-index:1}
    .preview{color:var(--muted);font-size:var(--fs-13);line-height:1.6;margin-bottom:var(--sp-12);position:relative;z-index:1}
    .meta{display:flex;gap:var(--sp-14);color:var(--muted);font-size:var(--fs-12);font-weight:600;position:relative;z-index:1}

    .tags{display:flex;flex-wrap:wrap;gap:var(--sp-8);margin-bottom:var(--sp-12)}
    .tag{display:inline-flex;align-items:center;gap:var(--sp-6);padding:var(--sp-6) var(--sp-10);border-radius:var(--r-sm);border:1px solid var(--hairline);background:color-mix(in srgb,var(--accent-1) 8%,transparent);color:inherit;font-weight:700;font-size:var(--fs-12);transition:all var(--dur-1) var(--ease);position:relative;z-index:1}
    .tag:hover{transform:translateY(-2px);background:color-mix(in srgb,var(--accent-1) 15%,transparent);box-shadow:var(--shadow-sm)}

    .cal-card{background:var(--card);border:1px solid var(--hairline);border-radius:var(--r-xl);padding:var(--sp-16);box-shadow:var(--shadow-md)}
    .cal-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:var(--sp-14)}
    .cal-title{font-size:var(--fs-18);font-weight:900;letter-spacing:-.02em}
    .cal-btn{width:40px;height:40px;border-radius:50%;border:none;background:color-mix(in srgb,var(--bg-elev) 95%,transparent);color:var(--muted);cursor:pointer;transition:all .25s cubic-bezier(.2,.8,.2,1);display:inline-flex;align-items:center;justify-content:center;position:relative;overflow:hidden}
    .cal-btn::before{content:'';position:absolute;inset:0;background:color-mix(in srgb,var(--accent-1) 12%,transparent);opacity:0;transition:all .25s cubic-bezier(.2,.8,.2,1);border-radius:50%;transform:scale(.7)}
    .cal-btn:hover{color:var(--accent-1);transform:scale(1.08)}
    .cal-btn:hover::before{opacity:1;transform:scale(1)}
    .cal-btn:active{transform:scale(.92)}
    .cal-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:var(--sp-8)}
    .cal-dow{text-align:center;font-weight:700;font-size:var(--fs-12);color:var(--muted);padding:var(--sp-8)}
    .cal-day{aspect-ratio:1;display:flex;align-items:center;justify-content:center;border-radius:var(--r-sm);cursor:pointer;font-weight:700;transition:all var(--dur-1) var(--ease);position:relative}
    .cal-day::before{content:'';position:absolute;inset:0;background:var(--accent-grad);border-radius:var(--r-sm);opacity:0;transition:opacity .2s var(--ease)}
    .cal-day:hover::before{opacity:.12}
    .cal-day:hover{transform:scale(1.12)}
    .cal-day:active{transform:scale(.95)}
    .has-idea{background:var(--accent-grad);color:#fff;box-shadow:var(--shadow-sm)}
    .has-idea::before{opacity:.2}

    .empty{text-align:center;padding:4.5rem 1rem;color:var(--muted);animation:fadeInUp .5s var(--ease)}
    @keyframes fadeInUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
    .empty .ico{font-size:3.75rem;background:var(--accent-grad);-webkit-background-clip:text;background-clip:text;color:transparent;animation:pulse 2s ease-in-out infinite}
    @keyframes pulse{0%,100%{opacity:.8;transform:scale(1)}50%{opacity:1;transform:scale(1.05)}}
    .empty h3{font-size:var(--fs-18);color:var(--text);margin:var(--sp-10) 0 var(--sp-8)}

    /* iOS Style Bottom Navigation - Clean & Minimal */
    .gnb{position:fixed;left:0;right:0;bottom:0;z-index:60;backdrop-filter:saturate(180%) blur(20px);background:color-mix(in srgb,var(--bg-elev) 92%, transparent);border-top:1px solid var(--hairline);padding:calc(env(safe-area-inset-bottom) + 6px) 0 6px;box-shadow:0 -2px 16px rgba(0,0,0,.08)}
    .gnb-inner{max-width:1040px;margin:0 auto;display:flex;justify-content:space-around;align-items:center;gap:8px;padding:0 16px}
    .gnb-btn{min-width:56px;height:56px;display:flex;align-items:center;justify-content:center;border:none;border-radius:14px;background:transparent;cursor:pointer;transition:all .25s cubic-bezier(.2,.8,.2,1);position:relative;padding:0;flex:1;max-width:72px}
    .gnb-btn::before{content:'';position:absolute;inset:6px;background:color-mix(in srgb,var(--accent-1) 12%,transparent);border-radius:10px;opacity:0;transform:scale(.8);transition:all .25s cubic-bezier(.2,.8,.2,1)}
    .gnb-btn-add::before{background:var(--accent-grad)}
    .gnb-ico{width:26px;height:26px;transition:all .25s cubic-bezier(.2,.8,.2,1);position:relative;z-index:1;color:var(--muted)}
    .gnb-btn:active{transform:scale(.92)}
    .gnb-btn:active::before{transform:scale(.88)}
    .gnb-btn:active .gnb-ico{transform:scale(.88)}
    .gnb-btn.active::before{opacity:1;transform:scale(1)}
    .gnb-btn.active .gnb-ico{color:var(--accent-1);transform:scale(1);stroke-width:2.5}
    .gnb-btn-add.active .gnb-ico{color:#fff}
    html.dark .gnb{background:rgba(18,19,22,.85);border-top-color:rgba(255,255,255,.1)}
    html.light .gnb{background:rgba(255,255,255,.85);border-top-color:rgba(0,0,0,.1)}
    html.dark .gnb-ico{color:rgba(255,255,255,.65)}
    html.light .gnb-ico{color:rgba(0,0,0,.55)}
    html.dark .gnb-btn.active .gnb-ico{color:var(--accent-1)}
    html.light .gnb-btn.active .gnb-ico{color:var(--accent-1)}
    @media (hover: hover){
      .gnb-btn:hover:not(.active)::before{opacity:.5;transform:scale(.95)}
      .gnb-btn:hover:not(.active) .gnb-ico{color:var(--accent-1);transform:scale(1.08)}
    }

    /* Drag preview toast - Enhanced */
    .drag-toast{position:fixed;top:0;left:0;transform:translate(-9999px,-9999px);pointer-events:none;padding:10px 14px;border-radius:14px;background:var(--card);border:1px solid var(--hairline);box-shadow:var(--shadow-lg);font-size:12px;display:flex;align-items:center;gap:10px;z-index:70;backdrop-filter:blur(12px)}
    .drag-toast .tt{font-weight:800}
    .drag-toast .tg{opacity:.75;padding:2px 8px;background:color-mix(in srgb,var(--accent-1) 15%,transparent);border-radius:6px}

    /* iOS Style FAB */
    .fab{position:fixed;right:1.5rem;bottom:5.5rem;width:56px;height:56px;border-radius:50%;background:var(--accent-grad);color:#fff;display:flex;align-items:center;justify-content:center;box-shadow:0 8px 24px rgba(109,121,255,.35);cursor:pointer;transition:all .25s cubic-bezier(.2,.8,.2,1);border:none;z-index:55}
    .fab:hover{transform:scale(1.12);box-shadow:0 12px 32px rgba(109,121,255,.45)}
    .fab:active{transform:scale(.95)}
    .fab .ico{transition:all .25s cubic-bezier(.2,.8,.2,1);position:relative;z-index:2}
    .fab:hover .ico{transform:rotate(90deg)}
    .fab:active .ico{transform:rotate(135deg) scale(.9)}

    /* Modal & Overlay - Enhanced */
    .overlay{position:fixed;inset:0;background:rgba(0,0,0,.65);backdrop-filter:blur(8px);display:none;align-items:flex-start;justify-content:center;padding:var(--sp-16);z-index:1000;overflow:auto;animation:fadeIn .3s var(--ease)}
    .modal{width:min(760px,100%);max-height:100dvh;background:var(--card);border:1px solid var(--hairline);border-radius:24px;box-shadow:var(--shadow-lg);display:flex;flex-direction:column;overflow:hidden;animation:modalSlideUp .3s var(--ease)}
    @keyframes modalSlideUp{from{opacity:0;transform:translateY(30px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}
    .modal-head{position:sticky;top:0;z-index:1;display:flex;align-items:center;justify-content:space-between;padding:var(--sp-16) var(--sp-20);border-bottom:1px solid var(--hairline);background:inherit;backdrop-filter:blur(8px)}
    .modal-title{font-size:var(--fs-18);font-weight:900;letter-spacing:-.02em}
    .modal-body{padding:var(--sp-20);overflow:auto;-webkit-overflow-scrolling:touch}
    .modal-actions{position:sticky;bottom:0;display:flex;gap:var(--sp-12);padding:var(--sp-16) var(--sp-20);background:linear-gradient(180deg,color-mix(in srgb,var(--bg-elev) 90%,transparent),color-mix(in srgb,var(--bg-elev) 98%,transparent));border-top:1px solid var(--hairline)}
    .label{display:block;margin-bottom:var(--sp-8);font-weight:800;font-size:var(--fs-13);color:var(--muted);letter-spacing:.02em}
    .input,.drop{width:100%;min-height:var(--ctl-48);border-radius:var(--r-lg);padding:0 var(--sp-16);background:color-mix(in srgb,var(--bg-elev) 85%,transparent);border:1px solid var(--hairline);color:var(--text);outline:none;transition:all var(--dur-2) var(--ease)}
    .input:focus,.drop:focus{box-shadow:0 0 0 4px color-mix(in srgb,var(--accent-1) 16%,transparent);border-color:color-mix(in srgb,var(--accent-1) 38%,var(--hairline));transform:translateY(-1px)}
    .btn{display:inline-flex;align-items:center;justify-content:center;gap:var(--sp-8);padding:var(--sp-12) var(--sp-16);border-radius:var(--r-lg);font-weight:800;cursor:pointer;border:1px solid transparent;transition:all .2s var(--ease);position:relative;overflow:hidden}
    .btn::before{content:'';position:absolute;inset:0;background:rgba(255,255,255,.15);opacity:0;transition:opacity .2s var(--ease)}
    .btn:hover::before{opacity:1}
    .btn:active{transform:scale(.97)}
    .btn-primary{background:var(--accent-grad);color:#fff;box-shadow:var(--shadow-md)}
    .btn-primary:hover{box-shadow:var(--shadow-lg)}
    .btn-ghost{background:transparent;color:var(--muted);border-color:var(--hairline)}
    .btn-ghost:hover{background:color-mix(in srgb,var(--bg-elev) 95%,transparent);color:var(--text)}
    .btn-danger{background:linear-gradient(135deg,#ef4444,#dc2626);color:#fff;box-shadow:var(--shadow-md)}
    .btn-danger:hover{box-shadow:0 8px 24px rgba(239,68,68,.4)}

    html.dark .modal{border-color:rgba(255,255,255,.85)} html.dark .modal-head{border-bottom-color:rgba(255,255,255,.6)}

    #editor{min-height:300px;border-radius:var(--r-lg);overflow:hidden}
    .ql-toolbar.ql-snow{border:none !important;border-bottom:1px solid var(--hairline) !important;border-radius:var(--r-lg) var(--r-lg) 0 0 !important;background:color-mix(in srgb,var(--bg-elev) 92%,transparent) !important;padding:var(--sp-12) !important;display:flex;flex-wrap:wrap;gap:4px}
    .ql-toolbar.ql-snow .ql-formats{margin-right:8px !important;margin-bottom:4px}
    .ql-container.ql-snow{border:none !important;border-radius:0 0 var(--r-lg) var(--r-lg) !important;background:color-mix(in srgb,var(--bg-elev) 95%,transparent) !important}
    .ql-editor{font-family:var(--font-family) !important;font-size:var(--fs-14);line-height:1.6;color:var(--text);padding:var(--sp-16) !important;min-height:300px}
    .ql-snow .ql-picker{color:var(--text) !important}
    .ql-snow .ql-stroke{stroke:var(--text) !important}
    .ql-snow .ql-fill{fill:var(--text) !important}
    .ql-snow .ql-picker-options{background:var(--bg-elev) !important;border:1px solid var(--hairline) !important;border-radius:8px !important;box-shadow:var(--shadow-lg) !important}
    .ql-snow .ql-picker-item:hover,.ql-snow .ql-picker-item.ql-selected{color:var(--accent-1) !important}
    .ql-snow.ql-toolbar button:hover,.ql-snow .ql-toolbar button:hover,.ql-snow.ql-toolbar button.ql-active,.ql-snow .ql-toolbar button.ql-active,.ql-snow.ql-toolbar .ql-picker-label:hover,.ql-snow .ql-toolbar .ql-picker-label:hover,.ql-snow.ql-toolbar .ql-picker-label.ql-active,.ql-snow .ql-toolbar .ql-picker-label.ql-active,.ql-snow.ql-toolbar .ql-picker-item:hover,.ql-snow .ql-toolbar .ql-picker-item:hover,.ql-snow.ql-toolbar .ql-picker-item.ql-selected,.ql-snow .ql-toolbar .ql-picker-item.ql-selected{color:var(--accent-1) !important}
    .ql-snow.ql-toolbar button:hover .ql-stroke,.ql-snow .ql-toolbar button:hover .ql-stroke,.ql-snow.ql-toolbar button.ql-active .ql-stroke,.ql-snow .ql-toolbar button.ql-active .ql-stroke,.ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke,.ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke,.ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke,.ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke,.ql-snow.ql-toolbar button:hover .ql-stroke-miter,.ql-snow .ql-toolbar button:hover .ql-stroke-miter,.ql-snow.ql-toolbar button.ql-active .ql-stroke-miter,.ql-snow .ql-toolbar button.ql-active .ql-stroke-miter{stroke:var(--accent-1) !important}
    .ql-snow.ql-toolbar button:hover .ql-fill,.ql-snow .ql-toolbar button:hover .ql-fill,.ql-snow.ql-toolbar button.ql-active .ql-fill,.ql-snow .ql-toolbar button.ql-active .ql-fill,.ql-snow.ql-toolbar .ql-picker-label:hover .ql-fill,.ql-snow .ql-toolbar .ql-picker-label:hover .ql-fill,.ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-fill,.ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-fill{fill:var(--accent-1) !important}
    .ql-editor table{border-collapse:collapse;width:100%;margin:12px 0}
    .ql-editor table td,.ql-editor table th{border:1px solid var(--hairline);padding:8px;min-width:50px}
    .ql-editor table th{background:color-mix(in srgb,var(--accent-1) 10%,transparent);font-weight:700}
    .ql-editor table tr:hover{background:color-mix(in srgb,var(--accent-1) 5%,transparent)}
    .ql-editor hr{border:none;border-top:2px solid var(--hairline);margin:20px 0;opacity:.6}
    .ql-editor pre.ql-syntax{background:color-mix(in srgb,var(--bg-elev) 95%,transparent) !important;color:var(--text) !important;border-radius:8px;padding:12px;overflow-x:auto;border:1px solid var(--hairline)}
    .ql-editor blockquote{border-left:4px solid var(--accent-1);padding-left:16px;margin:12px 0;color:var(--muted);font-style:italic}
    .ql-editor h1,.ql-editor h2,.ql-editor h3,.ql-editor h4,.ql-editor h5,.ql-editor h6{font-weight:900;margin:16px 0 8px;line-height:1.3}
    .ql-editor h1{font-size:2em;color:var(--text)}
    .ql-editor h2{font-size:1.5em;color:var(--text)}
    .ql-editor h3{font-size:1.25em;color:var(--text)}
    .ql-editor img{max-width:100%;height:auto;border-radius:8px;margin:12px 0;box-shadow:var(--shadow-sm)}
    .ql-editor .ql-video{width:100%;height:400px;border-radius:8px;box-shadow:var(--shadow-sm)}
    .ql-editor ul,.ql-editor ol{padding-left:1.5em}
    .ql-editor li{margin:4px 0}
    .ql-editor .ql-align-center{text-align:center}
    .ql-editor .ql-align-right{text-align:right}
    .ql-editor .ql-align-justify{text-align:justify}

    @media (prefers-reduced-motion:reduce){*{animation:none !important;transition-duration:.01ms !important}}

    /* DnD states - Enhanced */
    .card[draggable="true"]{cursor:grab}
    .card[draggable="true"]:active{cursor:grabbing;opacity:.8}
    .cal-day.drop-hover{outline:3px dashed color-mix(in srgb,var(--accent-1) 55%, transparent); outline-offset:2px;transform:scale(1.08);background:color-mix(in srgb,var(--accent-1) 10%,transparent)}
    .cal-day.drop-success{animation:dropSuccess .7s var(--ease)}
    @keyframes dropSuccess{
      0%{box-shadow:0 0 0 0 rgba(109,121,255,.7);background:var(--accent-grad);transform:scale(1)}
      50%{box-shadow:0 0 0 12px rgba(109,121,255,.0);transform:scale(1.15)}
      100%{box-shadow:0 0 0 0 rgba(109,121,255,.0);transform:scale(1)}
    }

    /* Enhanced Splash Screen */
    .splash{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;z-index:10000;overflow:hidden;background:linear-gradient(135deg,#5b2cff,#b06bff 60%,#f093fb);animation:splashFadeIn var(--dur-3) var(--ease)}
    .splash.hide{opacity:0;pointer-events:none;transition:opacity .6s var(--ease)}
    .splash::before,.splash::after{content:"";position:absolute;width:600px;height:600px;background:radial-gradient(circle,rgba(255,255,255,.2),transparent 70%);border-radius:50%;filter:blur(40px);animation:orbit 15s linear infinite}
    .splash::before{top:-10%;left:-10%}
    .splash::after{bottom:-10%;right:-10%;animation-duration:20s;animation-direction:reverse}
    @keyframes orbit{0%{transform:translate(0,0) rotate(0deg)}25%{transform:translate(50px,50px) rotate(90deg)}50%{transform:translate(0,100px) rotate(180deg)}75%{transform:translate(-50px,50px) rotate(270deg)}100%{transform:translate(0,0) rotate(360deg)}}
    @keyframes splashFadeIn{from{opacity:0}to{opacity:1}}
    @keyframes subfade{from{opacity:0;transform:translateY(8px)}to{opacity:.95;transform:none}}
    .splash-card{position:relative;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;animation:splashZoom .8s var(--ease)}
    @keyframes splashZoom{from{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}
    .splash-logo{font-weight:900;font-size:calc(2.4 * var(--fs-28));letter-spacing:-.035em;color:#fff;text-align:center;text-shadow:0 4px 24px rgba(0,0,0,.3);animation:logoFloat 3s ease-in-out infinite}
    @keyframes logoFloat{0%,100%{transform:translateY(0)}50%{transform:translateY(-8px)}}
    .splash-sub{animation:subfade .6s var(--ease) .3s backwards}
    .splash-icon{animation:iconSpin 1s var(--ease) .2s backwards, iconFloat 3s ease-in-out .8s infinite}
    @keyframes iconSpin{from{opacity:0;transform:rotate(-180deg) scale(.5)}to{opacity:1;transform:rotate(0) scale(1)}}
    @keyframes iconFloat{0%,100%{transform:translateY(0) rotate(0deg)}50%{transform:translateY(-12px) rotate(5deg)}}
    .skip-btn{margin-top:16px;padding:10px 18px;border-radius:16px;border:1px solid var(--skip-bd);background:var(--skip-bg);color:var(--skip-fg);font-weight:900;cursor:pointer;box-shadow:0 8px 24px rgba(0,0,0,.35);transition:all .2s var(--ease);animation:subfade .6s var(--ease) .5s backwards}
    .skip-btn:hover{transform:translateY(-2px);box-shadow:0 12px 32px rgba(0,0,0,.4)}
    .skip-btn:active{transform:translateY(0)}
    html[data-skip="auto"].dark{--skip-bg:#fff;--skip-bd:#fff;--skip-fg:#000}
    html[data-skip="auto"].light{--skip-bg:#000;--skip-bd:#000;--skip-fg:#fff}

    /* iOS Style Scroll to top button */
    .scroll-top{position:fixed;right:1.5rem;bottom:8rem;width:48px;height:48px;border-radius:50%;background:color-mix(in srgb,var(--bg-elev) 92%,transparent);backdrop-filter:saturate(180%) blur(20px);border:none;color:var(--muted);display:none;align-items:center;justify-content:center;cursor:pointer;transition:all .25s cubic-bezier(.2,.8,.2,1);z-index:54;box-shadow:0 4px 16px rgba(0,0,0,.15)}
    .scroll-top.show{display:flex;animation:fadeInUp .3s var(--ease)}
    .scroll-top:hover{transform:scale(1.08);background:var(--accent-grad);color:#fff;border-color:transparent;box-shadow:0 8px 24px rgba(109,121,255,.35)}
    .scroll-top:active{transform:scale(.92)}

    /* Loading state for search */
    .search-loading{padding:1.5rem;text-align:center;color:var(--muted);font-size:var(--fs-13)}
    .search-loading::after{content:'...';animation:dots 1.5s steps(4,end) infinite}
    @keyframes dots{0%,20%{content:'.'}40%{content:'..'}60%,100%{content:'...'}}
  </style>
</head>
<body>
  <!-- Enhanced Splash Screen -->
  <div id="splash" class="splash" aria-hidden="true">
    <div class="splash-card">
      <!-- Modern Brain Icon with Animation -->
      <svg class="splash-icon" aria-hidden="true" width="160" height="160" viewBox="0 0 256 256" style="display:block;margin:0 auto 24px auto">
        <defs>
          <linearGradient id="brainGlow" x1="0" y1="0" x2="1" y2="1">
            <stop offset="0%" stop-color="#ffb3bd"/>
            <stop offset="50%" stop-color="#ff8ea1"/>
            <stop offset="100%" stop-color="#ff6b8a"/>
          </linearGradient>
          <filter id="glow">
            <feGaussianBlur stdDeviation="4" result="coloredBlur"/>
            <feMerge>
              <feMergeNode in="coloredBlur"/>
              <feMergeNode in="SourceGraphic"/>
            </feMerge>
          </filter>
        </defs>
        <g fill="url(#brainGlow)" stroke="#fff" stroke-width="8" stroke-linecap="round" stroke-linejoin="round" filter="url(#glow)">
          <path d="M122 36c-22-10-49-2-62 18-10 15-9 33-2 46-17 5-30 23-28 41 2 20 18 35 38 37-4 14 2 30 16 39 15 10 34 8 46-3V58c0-9-4-18-8-22Z"/>
          <path d="M134 36c22-10 49-2 62 18 10 15 9 33 2 46 17 5 30 23 28 41-2 20-18 35-38 37 4 14-2 30-16 39-15 10-34 8-46-3V58c0-9 4-18 8-22Z"/>
          <path d="M80 82c-12 6-18 22-8 34m8 28c-10 8-12 22-2 32m98-94c12 6 18 22 8 34m-8 28c10 8 12 22 2 32" fill="none"/>
          <path d="M128 52v152" fill="none" stroke-width="10"/>
        </g>
      </svg>
      <div class="splash-logo">IDEA BRAIN</div>
      <div class="brand-sub logo">Innovative Design & Engineering for Advanced Business Research and Applied Intelligence Network</div>
      <button id="skipSplash" class="skip-btn" type="button" aria-label="Skip to main">ÏãúÏûëÌïòÍ∏∞</button>
    </div>
  </div>

  <header id="header">
    <div class="wrap">
      <div class="row">
        <div class="brand-wrap">
          <div class="brand">IDEA BRAIN</div>
        </div>
        <div class="toolbar">
          <button class="icon-btn" id="themeBtn" title="ÌÖåÎßà Ï†ÑÌôò" aria-label="ÌÖåÎßà Ï†ÑÌôò">
            <svg class="ico" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
            </svg>
          </button>
          <button class="icon-btn" id="calBtn" title="Ï∫òÎ¶∞Îçî Î≥¥Í∏∞" aria-label="Ï∫òÎ¶∞Îçî Î≥¥Í∏∞">
            <svg class="ico" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
              <line x1="16" y1="2" x2="16" y2="6"/>
              <line x1="8" y1="2" x2="8" y2="6"/>
              <line x1="3" y1="10" x2="21" y2="10"/>
            </svg>
          </button>
          <button class="icon-btn" id="searchBtn" title="Í≤ÄÏÉâ (‚åò/Ctrl+K)" aria-label="Í≤ÄÏÉâ">
            <svg class="ico" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="11" cy="11" r="8"/>
              <line x1="21" y1="21" x2="16.65" y2="16.65"/>
            </svg>
          </button>
        </div>
      </div>
      <div class="search" id="searchBar" style="display:none">
        <input id="searchInput" type="text" placeholder="ÏïÑÏù¥ÎîîÏñ¥ Í≤ÄÏÉâ‚Ä¶ (Ï†úÎ™©¬∑ÌÉúÍ∑∏¬∑ÎÇ¥Ïö©)" autocomplete="off" />
        <svg class="ico search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="11" cy="11" r="8"/>
          <line x1="21" y1="21" x2="16.65" y2="16.65"/>
        </svg>
        <div id="searchResults" class="search-results"></div>
      </div>
    </div>
  </header>

  <main>
    <div class="viewbar" id="viewBar">
      <button class="vbtn active" id="listBtn" aria-pressed="true">
        <svg class="ico" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round">
          <path d="M8 6h13M8 12h13M8 18h13"/>
          <circle cx="4" cy="6" r="1" fill="currentColor" stroke="none"/>
          <circle cx="4" cy="12" r="1" fill="currentColor" stroke="none"/>
          <circle cx="4" cy="18" r="1" fill="currentColor" stroke="none"/>
        </svg>Î™©Î°ù
      </button>
      <button class="vbtn" id="gridBtn" aria-pressed="false">
        <svg class="ico" viewBox="0 0 24 24" fill="currentColor" stroke="none">
          <rect x="3" y="3" width="8" height="8" rx="2"/>
          <rect x="13" y="3" width="8" height="8" rx="2"/>
          <rect x="3" y="13" width="8" height="8" rx="2"/>
          <rect x="13" y="13" width="8" height="8" rx="2"/>
        </svg>Í∑∏Î¶¨Îìú
      </button>
    </div>

    <section id="ideas" class="list"></section>

    <section id="calendarWrap" style="display:none">
      <div class="cal-card">
        <div class="cal-head">
          <button class="cal-btn" id="prevMonth" aria-label="Ïù¥Ï†Ñ Îã¨">
            <svg class="ico" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M15 18l-6-6 6-6"/>
            </svg>
          </button>
          <div class="cal-title" id="calTitle">YYYY.MM</div>
          <button class="cal-btn" id="nextMonth" aria-label="Îã§Ïùå Îã¨">
            <svg class="ico" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M9 18l6-6-6-6"/>
            </svg>
          </button>
        </div>
        <div class="cal-grid" style="margin-bottom:var(--sp-8);">
          <div class="cal-dow" style="color:#ef4444">Ïùº</div><div class="cal-dow">Ïõî</div><div class="cal-dow">Ìôî</div><div class="cal-dow">Ïàò</div><div class="cal-dow">Î™©</div><div class="cal-dow">Í∏à</div><div class="cal-dow" style="color:#3b82f6">ÌÜ†</div>
        </div>
        <div class="cal-grid" id="calDays"></div>
      </div>
    </section>

    <div id="empty" class="empty" style="display:none">
      <div class="ico" aria-hidden="true" style="width:56px;height:56px">
        <svg class="ico" viewBox="0 0 24 24" style="width:56px;height:56px" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
        </svg>
      </div>
      <h3>ÏïÑÏßÅ ÏïÑÏù¥ÎîîÏñ¥Í∞Ä ÏóÜÏäµÎãàÎã§</h3>
      <div>Ïò§Î•∏Ï™Ω ÏïÑÎûò <b>+</b> Î≤ÑÌäºÏúºÎ°ú Ï≤´ ÏïÑÏù¥ÎîîÏñ¥Î•º Ï∂îÍ∞ÄÌï¥Î≥¥ÏÑ∏Ïöî</div>
    </div>
  </main>

  <!-- Enhanced FAB -->
  <button class="fab" id="fab" title="ÏÉà ÏïÑÏù¥ÎîîÏñ¥" aria-label="ÏÉà ÏïÑÏù¥ÎîîÏñ¥">
    <svg class="ico" viewBox="0 0 24 24" style="width:28px;height:28px" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
      <line x1="12" y1="5" x2="12" y2="19"/>
      <line x1="5" y1="12" x2="19" y2="12"/>
    </svg>
  </button>

  <!-- Scroll to Top Button -->
  <button class="scroll-top" id="scrollTop" title="Îß® ÏúÑÎ°ú" aria-label="Îß® ÏúÑÎ°ú">
    <svg class="ico" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M18 15l-6-6-6 6"/>
    </svg>
  </button>

  <!-- Drag Preview Toast -->
  <div id="dragToast" class="drag-toast" aria-hidden="true">
    <svg class="ico" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <line x1="8" y1="6" x2="21" y2="6"/>
      <line x1="8" y1="12" x2="21" y2="12"/>
      <line x1="8" y1="18" x2="21" y2="18"/>
      <line x1="3" y1="6" x2="3.01" y2="6"/>
      <line x1="3" y1="12" x2="3.01" y2="12"/>
      <line x1="3" y1="18" x2="3.01" y2="18"/>
    </svg>
    <span class="tt"></span>
    <span class="tg"></span>
  </div>

  <!-- Enhanced Bottom GNB with iOS Style Icons -->
  <nav class="gnb" role="navigation" aria-label="ÌïòÎã® ÎÇ¥ÎπÑÍ≤åÏù¥ÏÖò">
    <div class="gnb-inner">
      <button class="gnb-btn active" id="navHome" aria-label="Ìôà">
        <svg class="gnb-ico" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
          <path d="M9 22V12h6v10"/>
        </svg>
      </button>
      <button class="gnb-btn" id="navCalendar" aria-label="Ï∫òÎ¶∞Îçî">
        <svg class="gnb-ico" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
          <line x1="16" y1="2" x2="16" y2="6"/>
          <line x1="8" y1="2" x2="8" y2="6"/>
          <line x1="3" y1="10" x2="21" y2="10"/>
        </svg>
      </button>
      <button class="gnb-btn gnb-btn-add" id="navAdd" aria-label="Ï∂îÍ∞Ä">
        <svg class="gnb-ico" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
          <line x1="12" y1="5" x2="12" y2="19"/>
          <line x1="5" y1="12" x2="19" y2="12"/>
        </svg>
      </button>
      <button class="gnb-btn" id="navSearch" aria-label="Í≤ÄÏÉâ">
        <svg class="gnb-ico" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="11" cy="11" r="8"/>
          <line x1="21" y1="21" x2="16.65" y2="16.65"/>
        </svg>
      </button>
      <button class="gnb-btn" id="navSettings" aria-label="ÏÑ§Ï†ï">
        <svg class="gnb-ico" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="3"/>
          <path d="M12 1v6m0 6v6M5.64 5.64l4.24 4.24m4.24 4.24l4.24 4.24M1 12h6m6 0h6M5.64 18.36l4.24-4.24m4.24-4.24l4.24-4.24"/>
        </svg>
      </button>
    </div>
  </nav>

  <!-- Enhanced Modal -->
  <div class="overlay" id="overlay">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <div class="modal-head">
        <div class="modal-title" id="modalTitle">ÏÉà ÏïÑÏù¥ÎîîÏñ¥</div>
        <button class="icon-btn" id="closeModal" aria-label="Îã´Í∏∞">
          <svg class="ico" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <div style="margin-bottom:var(--sp-16)">
          <label class="label" for="title">Ï†úÎ™©</label>
          <input id="title" class="input" type="text" placeholder="ÏïÑÏù¥ÎîîÏñ¥ Ï†úÎ™©ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî" />
        </div>
        <div style="margin-bottom:var(--sp-16)">
          <label class="label">ÌÉúÍ∑∏</label>
          <div id="tags" class="tags" style="margin-bottom:var(--sp-10)"></div>
          <div class="row" style="display:flex;gap:var(--sp-10);align-items:center;flex-wrap:nowrap">
            <input id="tagInput" class="input" type="text" placeholder="ÌÉúÍ∑∏ ÏûÖÎ†• ÌõÑ Enter (Ïòà: UX/Flow, UX/Token)" />
            <button id="addTag" class="btn btn-primary" style="flex-shrink:0">
              <svg class="ico" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                <line x1="12" y1="5" x2="12" y2="19"/>
                <line x1="5" y1="12" x2="19" y2="12"/>
              </svg>Ï∂îÍ∞Ä
            </button>
          </div>
        </div>
        <div style="margin-bottom:var(--sp-16)">
          <label class="label">Ïù¥ÎØ∏ÏßÄ</label>
          <input id="imageInput" type="file" accept="image/*" style="display:none" />
          <button id="imagePick" class="drop" style="display:flex;align-items:center;justify-content:center;gap:var(--sp-10);height:130px;cursor:pointer">
            <svg class="ico" viewBox="0 0 24 24" style="width:28px;height:28px" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
              <circle cx="8.5" cy="8.5" r="1.5"/>
              <path d="M21 15l-5-5L5 21"/>
            </svg>
            <span>Ïù¥ÎØ∏ÏßÄ ÏóÖÎ°úÎìú</span>
          </button>
          <div id="imagePreview" style="display:none;margin-top:var(--sp-12);position:relative;">
            <img id="previewImg" style="width:100%;border-radius:var(--r-lg);box-shadow:var(--shadow-md)" alt="ÎØ∏Î¶¨Î≥¥Í∏∞" />
            <button id="removeImage" class="icon-btn" style="position:absolute;top:var(--sp-12);right:var(--sp-12);background:linear-gradient(135deg,#ef4444,#dc2626);color:#fff;width:44px;height:44px">
              <svg class="ico" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <line x1="18" y1="6" x2="6" y2="18"/>
                <line x1="6" y1="6" x2="18" y2="18"/>
              </svg>
            </button>
          </div>
        </div>
        <div style="margin-bottom:var(--sp-16)">
          <label class="label">ÎßàÍ∞êÏùº (Due Date)</label>
          <input id="dueInput" class="input" type="date" />
        </div>
        <div style="margin-bottom:var(--sp-16)">
          <label class="label">ÎÇ¥Ïö©</label>
          <div id="editor"></div>
          <div style="margin-top:8px;display:flex;gap:8px;flex-wrap:wrap">
            <button type="button" class="btn btn-ghost" id="insertTable" style="font-size:12px;padding:6px 12px">
              <svg class="ico" viewBox="0 0 24 24" style="width:16px;height:16px" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                <line x1="3" y1="9" x2="21" y2="9"/>
                <line x1="3" y1="15" x2="21" y2="15"/>
                <line x1="12" y1="3" x2="12" y2="21"/>
              </svg>
              ÌÖåÏù¥Î∏î ÏÇΩÏûÖ
            </button>
            <button type="button" class="btn btn-ghost" id="insertDivider" style="font-size:12px;padding:6px 12px">
              <svg class="ico" viewBox="0 0 24 24" style="width:16px;height:16px" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <line x1="3" y1="12" x2="21" y2="12"/>
              </svg>
              Íµ¨Î∂ÑÏÑ†
            </button>
          </div>
        </div>
      </div>
      <div class="modal-actions">
        <button id="deleteBtn" class="btn btn-danger" style="display:none;flex:1">
          <svg class="ico" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M3 6h18"/>
            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
            <line x1="10" y1="11" x2="10" y2="17"/>
            <line x1="14" y1="11" x2="14" y2="17"/>
          </svg>
          ÏÇ≠Ï†ú
        </button>
        <button id="saveBtn" class="btn btn-primary" style="flex:1">
          <svg class="ico" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/>
            <polyline points="17 21 17 13 7 13 7 21"/>
            <polyline points="7 3 7 8 15 8"/>
          </svg>
          Ï†ÄÏû•
        </button>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/quill@2.0.2/dist/quill.js"></script>
  <script>
    // Enhanced Splash Screen with Auto-hide
    (function(){
      const splash=document.getElementById('splash');
      const skip=document.getElementById('skipSplash');
      if(!splash) return;
      function hideSplash(){
        if(!splash || splash.classList.contains('hide')) return;
        splash.classList.add('hide');
        setTimeout(()=>{ splash.style.display='none'; }, 600);
      }
      let t=setTimeout(hideSplash, 3200);
      if(skip){ skip.addEventListener('click', ()=>{ clearTimeout(t); hideSplash(); }); }
    })();
  </script>
  <script>
    // ===== State
    let quill; 
    let editingId=null; 
    let tags=[]; 
    let imageData=null; 
    let view='list'; 
    let calDate=new Date();
    const $=s=>document.querySelector(s); 
    const $$=s=>document.querySelectorAll(s); 
    const ideasKey='ideas';
    
    function getIdeas(){ try{return JSON.parse(localStorage.getItem(ideasKey)||'[]')}catch{return[]} }
    function setIdeas(data){ localStorage.setItem(ideasKey,JSON.stringify(data)) }

    // Theme
    function loadTheme(){ 
      const t=localStorage.getItem('theme')||'dark'; 
      document.documentElement.className=t; 
    }
    function toggleTheme(){ 
      const c=document.documentElement.classList; 
      const t=c.contains('light')?'dark':'light'; 
      document.documentElement.className=t; 
      localStorage.setItem('theme',t); 
    }

    // Render ideas
    function renderIdeas(list){
      const data=list||getIdeas(); 
      const cnt=$('#ideas'); 
      const empty=$('#empty');
      if(!data.length){ 
        cnt.innerHTML=''; 
        empty.style.display=''; 
        return; 
      }
      empty.style.display='none';
      cnt.innerHTML=data.map(i=>{
        const d=new Date(i.createdAt);
        const date=d.toLocaleDateString('ko-KR');
        const preview=i.content?.replace(/<[^>]*>/g,'').slice(0,120)+'...';
        const imgHtml=i.image?`<div class="thumb"><img src="${i.image}" alt=""></div>`:'';
        const tagsHtml=i.tags&&i.tags.length?`<div class="tags">${i.tags.map(t=>renderTag(t)).join('')}</div>`:'';
        const dueHtml=i.dueAt?`<span>üìÖ ${new Date(i.dueAt).toLocaleDateString('ko-KR')}</span>`:'';
        return `<div class="card" onclick="openModal(${i.id})" data-id="${i.id}" data-title="${i.title||''}" data-tags="${(i.tags||[]).join(',')}">
          ${imgHtml}
          ${tagsHtml}
          <div class="title">${i.title||'Ï†úÎ™© ÏóÜÏùå'}</div>
          <div class="preview">${preview||'ÎÇ¥Ïö© ÏóÜÏùå'}</div>
          <div class="meta"><span>üìù ${date}</span>${dueHtml}</div>
        </div>`;
      }).join('');
      addCalendarDnD();
    }
    
    function renderTag(t){ 
      return `<span class="tag">#${t}</span>`; 
    }

    // Search - Enhanced
    let searchTimeout;
    function search(q){
      const results=$('#searchResults');
      if(!q.trim()){ 
        results.style.display='none'; 
        return; 
      }
      
      clearTimeout(searchTimeout);
      results.innerHTML='<div class="search-loading">Í≤ÄÏÉâ Ï§ë</div>';
      results.style.display='block';
      
      searchTimeout = setTimeout(()=>{
        const list=getIdeas().filter(i=>{
          const titleMatch=i.title?.toLowerCase().includes(q.toLowerCase());
          const tagMatch=i.tags?.some(t=>t.toLowerCase().includes(q.toLowerCase()));
          const contentMatch=i.content?.toLowerCase().includes(q.toLowerCase());
          return titleMatch||tagMatch||contentMatch;
        });
        
        if(!list.length){ 
          results.innerHTML='<div class="search-empty">Í≤ÄÏÉâ Í≤∞Í≥ºÍ∞Ä ÏóÜÏäµÎãàÎã§</div>'; 
          return; 
        }
        
        results.innerHTML=list.map(i=>{
          const highlight=(text)=>text.replace(new RegExp(q,'gi'),m=>`<mark>${m}</mark>`);
          return `<div class="search-item" onclick="openModal(${i.id}); closeSearch()">
            <svg class="ico" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="10"/>
              <line x1="12" y1="8" x2="12" y2="16"/>
              <line x1="8" y1="12" x2="16" y2="12"/>
            </svg>
            <div><div style="font-weight:700">${highlight(i.title||'Ï†úÎ™© ÏóÜÏùå')}</div>
            <div style="font-size:12px;color:var(--muted);margin-top:2px">${i.tags?i.tags.map(t=>'#'+t).join(' '):''}</div></div>
          </div>`;
        }).join('');
      }, 300);
    }

    function closeSearch(){
      $('#searchBar').style.display='none';
      $('#searchInput').value='';
      $('#searchResults').style.display='none';
    }

    // Calendar
    function renderCalendar(){
      const y=calDate.getFullYear(); 
      const m=calDate.getMonth(); 
      const first=new Date(y,m,1).getDay(); 
      const last=new Date(y,m+1,0).getDate();
      $('#calTitle').textContent=`${y}.${String(m+1).padStart(2,'0')}`;
      const days=$('#calDays'); 
      days.innerHTML=''; 
      const list=getIdeas(); 
      const set=new Set();
      list.forEach(i=>{
        const t=new Date(i.createdAt); 
        if(t.getFullYear()===y&&t.getMonth()===m){ 
          set.add(`${y}-${m}-${t.getDate()}`); 
        }
      });
      for(let i=0;i<first;i++) days.innerHTML+=`<div></div>`;
      for(let day=1;day<=last;day++){
        const key=`${y}-${m}-${day}`; 
        const today=new Date(); 
        const isToday=today.toDateString()===new Date(y,m,day).toDateString();
        const todayStyle=isToday?'box-shadow:0 0 0 3px var(--accent-1);transform:scale(1.1)':'';
        days.innerHTML+=`<div class="cal-day ${set.has(key)?'has-idea':''}" data-y="${y}" data-m="${m}" data-d="${day}" style="${todayStyle}" onclick="filterByDate(${y},${m},${day})">${day}</div>`;
      }
      addCalendarDnD();
    }
    
    function filterByDate(y,m,d){
      const list=getIdeas().filter(i=>{
        const t=new Date(i.createdAt);
        return t.getFullYear()===y&&t.getMonth()===m&&t.getDate()===d
      });
      $('#calendarWrap').style.display='none'; 
      $('#ideas').style.display=''; 
      $('#viewBar').style.display=''; 
      renderIdeas(list);
    }

    // Modal
    function openModal(id){
      editingId=id??null; 
      $('#overlay').style.display='flex';
      $('#modalTitle').textContent=id?'ÏïÑÏù¥ÎîîÏñ¥ ÏàòÏ†ï':'ÏÉà ÏïÑÏù¥ÎîîÏñ¥';
      if(id){ 
        const i=getIdeas().find(x=>x.id===id); 
        if(i){
          $('#title').value=i.title||''; 
          quill.root.innerHTML=i.content||''; 
          tags=[...(i.tags||[])]; 
          imageData=i.image||null; 
          paintTags();
          if(imageData){ 
            showImage(imageData); 
            $('#removeImage').style.display=''; 
          }
          $('#deleteBtn').style.display='inline-flex';
          $('#dueInput').value=i.dueAt? new Date(i.dueAt).toISOString().slice(0,10):'';
        }
      } else { 
        resetModal(); 
      }
    }
    
    function closeModal(){ 
      $('#overlay').style.display='none'; 
    }
    
    function resetModal(){ 
      editingId=null; 
      $('#title').value=''; 
      quill?.setText(''); 
      tags=[]; 
      imageData=null; 
      paintTags(); 
      hideImage(); 
      $('#deleteBtn').style.display='none'; 
      $('#dueInput').value=''; 
    }

    // Tags
    function paintTags(){
      const html=tags.map(t=>`${renderTag(t)}<button onclick="removeTag('${t.replace(/"/g,'&quot;')}')" class="icon-btn" style="width:28px;height:28px;border-radius:50%;margin-left:4px">
        <svg class="ico" viewBox="0 0 24 24" style="width:16px;height:16px" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="18" y1="6" x2="6" y2="18"/>
          <line x1="6" y1="6" x2="18" y2="18"/>
        </svg>
      </button>`).join('');
      $('#tags').innerHTML=html;
    }
    
    function addTag(){ 
      const v=$('#tagInput').value.trim(); 
      if(v&&!tags.includes(v)){ 
        tags.push(v); 
        paintTags(); 
      } 
      $('#tagInput').value=''; 
    }
    
    function removeTag(t){ 
      tags=tags.filter(x=>x!==t); 
      paintTags(); 
    }

    // Image
    function showImage(src){ 
      $('#imagePreview').style.display='block'; 
      $('#previewImg').src=src; 
    }
    
    function hideImage(){ 
      $('#imagePreview').style.display='none'; 
      $('#previewImg').src=''; 
    }

    // Save/Delete
    function save(){
      const title=$('#title').value.trim(); 
      if(!title) return alert('Ï†úÎ™©ÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî');
      const content=quill.root.innerHTML; 
      const data=getIdeas(); 
      const now=new Date().toISOString(); 
      const dueVal=$('#dueInput')?.value? new Date($('#dueInput').value+'T12:00:00').toISOString():null;
      if(editingId){ 
        const idx=data.findIndex(i=>i.id===editingId); 
        if(idx>-1){ 
          const orig=data[idx]; 
          data[idx]={...orig,title,content,tags:[...tags],image:imageData,updatedAt:now,dueAt:dueVal}; 
        } 
      } else{ 
        data.unshift({id:Date.now(),title,content,tags:[...tags],image:imageData,createdAt:now,updatedAt:now,dueAt:dueVal}); 
      }
      setIdeas(data); 
      renderIdeas(); 
      renderCalendar(); 
      closeModal();
    }
    
    function remove(){ 
      if(!confirm('Ï†ïÎßê ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?')) return; 
      const data=getIdeas().filter(i=>i.id!==editingId); 
      setIdeas(data); 
      renderIdeas(); 
      renderCalendar(); 
      closeModal(); 
    }

    // Calendar DnD + Toast
    function addCalendarDnD(){
      const toast=$('#dragToast'); 
      const tt=toast.querySelector('.tt'); 
      const tg=toast.querySelector('.tg');
      $$('#ideas .card').forEach(el=>{
        el.setAttribute('draggable','true');
        el.addEventListener('dragstart',e=>{
          const t=el.dataset.title||''; 
          const tags=(el.dataset.tags||'').split(',').filter(Boolean);
          tt.textContent=t; 
          tg.textContent=tags.length?`#${tags[0]}`:'';
          toast.style.display='flex';
          toast.style.transform=`translate(${e.pageX+12}px,${e.pageY+12}px)`;
        });
        el.addEventListener('drag',e=>{
          if(e.pageX===0 && e.pageY===0) return;
          toast.style.transform=`translate(${e.pageX+12}px,${e.pageY+12}px)`;
        });
        el.addEventListener('dragend',()=>{ 
          toast.style.transform='translate(-9999px,-9999px)'; 
          toast.style.display='none';
        });
      });
      $$('#calDays .cal-day').forEach(d=>{
        d.addEventListener('dragover',e=>{ 
          e.preventDefault(); 
          d.classList.add('drop-hover'); 
        });
        d.addEventListener('dragleave',()=> d.classList.remove('drop-hover'));
        d.addEventListener('drop',e=>{
          e.preventDefault(); 
          d.classList.remove('drop-hover'); 
          d.classList.add('drop-success'); 
          setTimeout(()=>d.classList.remove('drop-success'),700);
          const y=+d.dataset.y, m=+d.dataset.m, day=+d.dataset.d; 
          const dt=new Date(y,m,day,12,0,0);
          const dragging = document.querySelector('#ideas .card[draggable="true"]:active, #ideas .card[draggable="true"]');
          if(!dragging) return;
          const id=+dragging.getAttribute('data-id'); 
          const list=getIdeas(); 
          const idx=list.findIndex(i=>i.id===id); 
          if(idx<0) return;
          if(e.shiftKey){ 
            // duplicate
            const dup={...list[idx], id:Date.now(), createdAt:dt.toISOString(), updatedAt:dt.toISOString()}; 
            list.unshift(dup);
          } else if(e.altKey){ 
            // branch ‚Üí Due
            list[idx]={...list[idx], dueAt:dt.toISOString(), updatedAt:new Date().toISOString()};
          } else{ 
            // move
            list[idx]={...list[idx], createdAt:dt.toISOString(), updatedAt:new Date().toISOString()};
          }
          setIdeas(list); 
          renderIdeas(); 
          renderCalendar();
        });
      });
    }

    // View toggles / Nav
    function showList(){ 
      view='list'; 
      $('#ideas').className='list'; 
      $('#listBtn').classList.add('active'); 
      $('#gridBtn').classList.remove('active'); 
    }
    
    function showGrid(){ 
      view='grid'; 
      $('#ideas').className='grid'; 
      $('#gridBtn').classList.add('active'); 
      $('#listBtn').classList.remove('active'); 
    }

    // Scroll to top functionality
    function updateScrollTop(){
      const scrollTop = $('#scrollTop');
      if(window.pageYOffset > 300){
        scrollTop.classList.add('show');
      } else {
        scrollTop.classList.remove('show');
      }
    }

    // Header scroll effect
    let lastScroll = 0;
    function updateHeader(){
      const header = $('#header');
      const currentScroll = window.pageYOffset;
      if(currentScroll > 50){
        header.classList.add('scrolled');
      } else {
        header.classList.remove('scrolled');
      }
      lastScroll = currentScroll;
    }

    // Init
    window.addEventListener('DOMContentLoaded',()=>{
      loadTheme();
      quill=new Quill('#editor',{ 
        theme:'snow',
        placeholder: 'ÏïÑÏù¥ÎîîÏñ¥Î•º ÏûêÏú†Î°≠Í≤å ÏûëÏÑ±ÌïòÏÑ∏Ïöî...',
        modules: {
          toolbar: [
            [{ 'header': [1, 2, 3, 4, 5, 6, false] }],
            [{ 'font': [] }],
            [{ 'size': ['small', false, 'large', 'huge'] }],
            ['bold', 'italic', 'underline', 'strike'],
            [{ 'color': [] }, { 'background': [] }],
            [{ 'script': 'sub'}, { 'script': 'super' }],
            [{ 'list': 'ordered'}, { 'list': 'bullet' }, { 'list': 'check' }],
            [{ 'indent': '-1'}, { 'indent': '+1' }],
            [{ 'align': [] }],
            ['blockquote', 'code-block'],
            ['link', 'image', 'video'],
            ['clean']
          ]
        }
      });

      renderIdeas(); 
      renderCalendar();

      // View buttons
      $('#listBtn').addEventListener('click',showList);
      $('#gridBtn').addEventListener('click',showGrid);
      
      // Navigation buttons
      $('#calBtn').addEventListener('click',()=>{ 
        $('#calendarWrap').style.display=''; 
        $('#ideas').style.display='none'; 
        $('#viewBar').style.display='none'; 
      });
      
      $('#navHome').addEventListener('click',()=>{ 
        $('#calendarWrap').style.display='none'; 
        $('#ideas').style.display=''; 
        $('#viewBar').style.display=''; 
        renderIdeas();
        // Update active state
        $$('.gnb-btn').forEach(btn => btn.classList.remove('active'));
        $('#navHome').classList.add('active');
      });
      
      $('#navCalendar').addEventListener('click',()=>{ 
        $('#calendarWrap').style.display=''; 
        $('#ideas').style.display='none'; 
        $('#viewBar').style.display='none'; 
        // Update active state
        $$('.gnb-btn').forEach(btn => btn.classList.remove('active'));
        $('#navCalendar').classList.add('active');
      });

      // Modal controls
      $('#fab').addEventListener('click',()=>openModal());
      $('#navAdd').addEventListener('click',()=>openModal());
      $('#closeModal').addEventListener('click',closeModal);
      $('#overlay').addEventListener('click',(e)=>{
        if(e.target === $('#overlay')) closeModal();
      });

      // Tag controls
      $('#addTag').addEventListener('click',addTag);
      $('#tagInput').addEventListener('keydown',e=>{ 
        if(e.key==='Enter'){ 
          e.preventDefault(); 
          addTag(); 
        } 
      });

      // Image controls
      $('#imagePick').addEventListener('click',()=>$('#imageInput').click());
      $('#imageInput').addEventListener('change',e=>{
        const f=e.target.files[0]; 
        if(f){
          const r=new FileReader(); 
          r.onload=ev=>{ 
            imageData=ev.target.result; 
            showImage(imageData); 
            $('#removeImage').style.display=''; 
          }; 
          r.readAsDataURL(f);
        }
      });
      $('#removeImage').addEventListener('click',()=>{ 
        imageData=null; 
        hideImage(); 
        $('#removeImage').style.display='none'; 
      });

      // Save/Delete buttons
      $('#saveBtn').addEventListener('click',save);
      $('#deleteBtn').addEventListener('click',remove);

      // Calendar navigation
      $('#prevMonth').addEventListener('click',()=>{ 
        calDate.setMonth(calDate.getMonth()-1); 
        renderCalendar(); 
      });
      $('#nextMonth').addEventListener('click',()=>{ 
        calDate.setMonth(calDate.getMonth()+1); 
        renderCalendar(); 
      });

      // Theme toggle
      $('#themeBtn').addEventListener('click',toggleTheme);

      // Search functionality
      $('#searchBtn').addEventListener('click',()=>{
        const searchBar = $('#searchBar');
        if(searchBar.style.display === 'none' || searchBar.style.display === ''){
          searchBar.style.display = 'block';
          $('#searchInput').focus();
        } else {
          closeSearch();
        }
      });
      
      $('#navSearch').addEventListener('click',()=>{
        $('#searchBar').style.display='block';
        $('#searchInput').focus();
        // Update active state
        $$('.gnb-btn').forEach(btn => btn.classList.remove('active'));
        $('#navSearch').classList.add('active');
      });
      
      $('#searchInput').addEventListener('input',e=>search(e.target.value));
      
      // Close search on Escape
      document.addEventListener('keydown',e=>{
        if(e.key==='Escape'){
          if($('#searchBar').style.display !== 'none'){
            closeSearch();
          } else if($('#overlay').style.display === 'flex'){
            closeModal();
          }
        }
      });

      // Keyboard shortcut for search (Cmd/Ctrl + K)
      document.addEventListener('keydown',e=>{
        if((e.metaKey || e.ctrlKey) && e.key === 'k'){
          e.preventDefault();
          $('#searchBar').style.display='block';
          $('#searchInput').focus();
        }
      });

      // Scroll to top button
      $('#scrollTop').addEventListener('click',()=>{
        window.scrollTo({
          top: 0,
          behavior: 'smooth'
        });
      });

      // Scroll events
      window.addEventListener('scroll', ()=>{
        updateScrollTop();
        updateHeader();
      });

      // Settings button (placeholder)
      $('#navSettings').addEventListener('click',()=>{
        alert('ÏÑ§Ï†ï Í∏∞Îä•ÏùÄ Í≥ß Ï∂îÍ∞ÄÎê©ÎãàÎã§! üéâ');
        $$('.gnb-btn').forEach(btn => btn.classList.remove('active'));
        $('#navSettings').classList.add('active');
      });

      // Table insert functionality
      $('#insertTable').addEventListener('click',()=>{
        const rows = prompt('Ìñâ ÏàòÎ•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî (Ïòà: 3):', '3');
        const cols = prompt('Ïó¥ ÏàòÎ•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî (Ïòà: 3):', '3');
        if(rows && cols){
          const r = parseInt(rows);
          const c = parseInt(cols);
          if(r > 0 && c > 0 && r <= 20 && c <= 10){
            let tableHTML = '<table><tbody>';
            for(let i = 0; i < r; i++){
              tableHTML += '<tr>';
              for(let j = 0; j < c; j++){
                const tag = i === 0 ? 'th' : 'td';
                tableHTML += `<${tag}>${i === 0 ? 'Ï†úÎ™©' : 'ÎÇ¥Ïö©'}</${tag}>`;
              }
              tableHTML += '</tr>';
            }
            tableHTML += '</tbody></table><p><br></p>';
            const range = quill.getSelection(true);
            quill.clipboard.dangerouslyPasteHTML(range.index, tableHTML);
          } else {
            alert('ÌñâÏùÄ 1-20, Ïó¥ÏùÄ 1-10 ÏÇ¨Ïù¥Î°ú ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.');
          }
        }
      });

      // Divider insert functionality
      $('#insertDivider').addEventListener('click',()=>{
        const range = quill.getSelection(true);
        quill.clipboard.dangerouslyPasteHTML(range.index, '<hr><p><br></p>');
      });

      // Initial scroll state
      updateScrollTop();
      updateHeader();
    });

    // Handle browser back/forward
    window.addEventListener('popstate', ()=>{
      renderIdeas();
      renderCalendar();
    });
  </script>
</body>
</html>